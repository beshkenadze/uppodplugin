var Uppod=new Class({Implements:[Options],options:{debug:false,player_id:"uppod_player"+Math.random(),width:500,src:"swf/uppod.swf",height:375,params:{},vars:{}},initialize:function(A,B){this.setOptions(B);this.player_id=this.options.player_id;this.container=A;this.width=this.options.width;this.height=this.options.height;this.params=this.options.params;this.vars=this.options.vars;this.src=this.options.src;this.timed=false;this.time=false;if(this.options.debug){if($("uppod-debug")){var C=$("uppod-debug")}else{var C=new Element("div",{id:"uppod-debug","class":"debug"});C.inject(document.body)}}this.init()}});Uppod.implement({init:function(){if(!$(this.container)){this.error("Не найден контейнер #"+this.container+" , аварийное завершение.");return}if($(this.player_id)){this.error('Плеер "'+this.player_id+'" уже существует , аварийное завершение.');return}var A=new Swiff(this.src+"?"+Math.random(),{id:this.player_id,container:this.container,width:this.width,height:this.height,params:this.params,vars:this.vars});this.player=this.getMovie(this.player_id);if(this.player=="undefined"){this.error('Не могу обратится к плееру "'+this.player_id+'", аварийное завершение.');return}this.bind()},log:function(B){if(this.options.debug){if(B.length>0){if($$("#uppod-debug p").length>10){$("uppod-debug").empty()}var C=new Element("p",{"class":"log",html:"Плеер "+this.player_id+" сообщает: "+B});var A=$("uppod-debug");C.inject(A)}}},error:function(C){if(this.options.debug){if(C.length>0){var D=new Element("p",{"class":"error",html:C});var B=$("uppod-debug");var A=B.get("html");D.inject(B)}}},bind:function(){var A=this.player;var B=this;$$(".uppod-command-"+this.player_id).addEvent("click",function(D){D.stop();var F=this.get("rel").split(" ");if(F.length>0){var E=F[0];var C=F[1]}else{var E=F}switch(E){case"play":case"pause":case"toggle":case"stop":case"getpl":case"getime":case"getv":B.cmd(E);break;case"volume":B.cmd("v",C);break;case"start":B.cmd("start",C);break;case"getimed":B.getTimed();break}})},getMovie:function(A){if(Browser.Engine.trident){return window[A]}else{return document[A]}},cmd:function(B,A,C){if(!A){var A=""}this.log("посылаю комманду "+B+A);return this.player.sendToUppod(B+A,(C?C:""))},play:function(){this.cmd("play")},pause:function(){this.cmd("pause")},toggle:function(){this.cmd("toggle")},stop:function(){this.cmd("stop")},getpl:function(){return this.cmd("getpl")},getv:function(){return this.cmd("getv")},getTime:function(A){return this.cmd("getime","",A)},getTimed:function(A){return this.cmd("getimed","",A)},setTimed:function(A){this.timed=A},setTime:function(A){this.time=A},volume:function(A){if(typeof A!="number"){A=50}if(A<0){A=0}if(A>100){A=100}this.cmd("v"+A)},start:function(A){if(typeof A!="number"){A=50}if(A<0){A=0}if(A>100){A=100}this.cmd("start"+A)},startTimer:function(callback,period){eval(callback);var parent=this;this.timer=setTimeout(function(){parent.startTimer(callback,period)},period)},stopTime:function(){clearTimeout(this.timer)}});